# Инструкция по разработке и развертыванию Tina NPU

## 1 Предисловие

### 1.1 Целевая аудитория

Данный документ (данное руководство) предназначен в первую очередь для следующих лиц:

• Инженеры технической поддержки

• Инженеры-разработчики программного обеспечения

• Клиенты AI-приложений



## 2 Основной текст

### 2.1 Введение в разработку NPU

• Поддержка квантизации int8/uint8/int16, производительность вычислений может достигать 1TOPS.

• По сравнению с крупными чипами, использующими GPU в качестве вычислительного блока AI, энергопотребление составляет менее 1% от требуемого GPU.

• Возможность прямого импорта форматов моделей Caffe, TensorFlow, Onnx, TFLite, Keras, Darknet, pyTorch и других.

• Предоставление инструментов разработки AI: поддержка быстрого преобразования моделей, поддержка API преобразования на стороне отладочной платы, поддержка моделей TensorFlow, TFLite, Caffe, ONNX, Darknet, pyTorch и других.

• Предоставление интерфейсов разработки AI-приложений: предоставление кроссплатформенного API NPU.

### 2.2 Процесс разработки

Полный процесс разработки NPU показан на следующей диаграмме:

![image-20221208111346439](http://photos.100ask.net/allwinner-docs/v853/AIApplication/image-20221208111346439.png)

<center>Рисунок 2-1: npu_1.png</center>

### 2.3 Обучение модели

На этапе обучения модели пользователь в соответствии с требованиями и фактической ситуацией выбирает подходящий фреймворк (например, Caffe, TensorFlow и т.д.) для обучения и получения модели, отвечающей требованиям. Также можно напрямую использовать уже обученную модель. Для развертывания на основе существующей алгоритмической модели можно не проходить этап обучения модели.

### 2.4 Преобразование модели

На этом этапе с помощью Acuity Toolkit модель, полученная в процессе обучения, преобразуется в файл модели NBG, пригодный для использования NPU.

### 2.5 Разработка программы

Заключительный этап - разработка программы на основе VIPLite API для реализации бизнес-логики.

### 2.6 acuity Toolkit

Allwinner предоставляет комплект разработки acuity toolkit для преобразования моделей, выполнения вывода и оценки производительности.

Пользователи через предоставленный интерфейс python могут удобно выполнить следующие функции:

1) Преобразование модели: поддержка импорта и экспорта моделей Caffe, TensorFlow Lite, Tensorflow, ONNX, Darknet NBG, которые впоследствии могут быть загружены и использованы на аппаратной платформе.

2) Вывод модели: возможность симуляции выполнения модели на ПК и получения результатов вывода, также можно выполнить модель на указанной аппаратной платформе и получить результаты вывода.

3) Оценка производительности: возможность симуляции выполнения на ПК и получения общего времени выполнения модели и времени выполнения каждого слоя, также можно через онлайн-отладку выполнить модель на указанной аппаратной платформе и получить общее время выполнения модели на оборудовании и время выполнения каждого слоя.

Данный документ в основном описывает преобразование моделей и разработку программ на основе NPU, не затрагивая содержание обучения моделей.

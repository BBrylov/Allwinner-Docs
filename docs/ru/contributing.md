---
sidebar: auto
---

# Руководство по внесению вклада

## Обзор

Репозиторий проекта использует [рабочие пространства pnpm](https://pnpm.io/zh/workspaces) для реализации [Monorepo](https://en.wikipedia.org/wiki/Monorepo), и содержит несколько взаимосвязанных независимых пакетов.

В директории `packages`:

- `bundler-vite`: модуль Bundler на основе Vite. Использует Vite для выполнения операций `dev` и `build` с VuePress App.
- `bundler-webpack`: модуль Bundler на основе Webpack. Использует Webpack для выполнения операций `dev` и `build` с VuePress App.
- `cli`: модуль интерфейса командной строки (CLI). Включает функции парсинга конфигурационных файлов пользователя, вызов `@vuepress/core` для создания VuePress App, выполнение соответствующих команд и т.д.
- `client`: модуль Client. Содержит точку входа клиентской страницы и предоставляет типы и вспомогательные функции, которые можно использовать при разработке на клиенте.
- `core`: модуль Core. Предоставляет Node API для создания VuePress App, включая логику страниц, систему плагинов, подготовку данных и другие функции.
- `markdown`: модуль Markdown. Использует `markdown-it` в качестве парсера Markdown и интегрирует некоторые плагины, используемые в VuePress.
- `shared`: модуль вспомогательных функций, которые можно использовать как на стороне Node, так и на стороне клиента.
- `utils`: модуль вспомогательных функций, которые можно использовать только на стороне Node.

В директории `ecosystem`:

- `plugin-${name}`: официальные плагины.
- `theme-default`: тема по умолчанию.
- `vuepress`: обертка для `vuepress-vite`.
- `vuepress-vite`: обертка для `@vuepress/cli` + `@vuepress/bundler-vite` + `@vuepress/theme-default`. Если пользователь хочет использовать тему по умолчанию + Vite, достаточно установить только этот пакет.
- `vuepress-webpack`: обертка для `@vuepress/cli` + `@vuepress/bundler-webpack` + `@vuepress/theme-default`. Если пользователь хочет использовать тему по умолчанию + Webpack, достаточно установить только этот пакет.

## Конфигурация для разработки

Требования для разработки:

- [Node.js](http://nodejs.org) **версия 18.16.0+**
- [pnpm](https://pnpm.io/zh/) **версия 8+**

Клонирование репозитория и установка зависимостей:

```bash
pnpm install
```

Компиляция исходного кода:

```bash
pnpm build
```

Запуск сайта документации проекта для разработки:

```bash
pnpm docs:dev
```

Основные инструменты, используемые для разработки этого проекта:

- [TypeScript](https://www.typescriptlang.org/) в качестве языка разработки
- [Vitest](https://vitest.dev/) для модульного тестирования
- [ESLint](https://eslint.org/) + [Prettier](https://prettier.io/) для проверки и форматирования кода

## Скрипты для разработки

### `pnpm build`

Команда `build` использует `tsc` и `tsup` для компиляции файлов TypeScript в файлы JavaScript.

Кроме того, она также копирует необходимые файлы ресурсов из директории исходных файлов в выходную директорию. Это связано с тем, что некоторые файлы ресурсов не обрабатываются `tsc` или `tsup`, но их все равно необходимо поместить в выходную директорию, сохраняя их относительные пути в проекте.

После клонирования репозитория вам может потребоваться сначала выполнить эту команду, чтобы убедиться, что код проекта может нормально работать, так как скомпилированные выходные директории исключены из репозитория с помощью `.gitignore`.

### `pnpm clean`

Команда `clean` выполняет команды `clean` во всех дочерних пакетах, очищая все выходные директории файлов и файлы кэша. Другими словами, она удаляет все файлы, созданные командами `build` и `copy`.

Вы можете выполнить эту команду, когда хотите заново собрать исходный код из исходного состояния.

### `pnpm docs:*`

#### `pnpm docs:build`, `pnpm docs:dev`, `pnpm docs:clean`

Префикс `docs:` указывает, что эти команды выполняются для документации, т.е. для директории `docs`.

VuePress использует сам себя для сборки собственного сайта документации.

Вам нужно сначала выполнить `pnpm build` для сборки исходного кода VuePress, а затем запустить эти команды с префиксом `docs:` для разработки или сборки документации.

#### `pnpm docs:serve`

Запускает локальный сервер сайта документации.

Вам нужно сначала выполнить `pnpm docs:build` для генерации выходных файлов сайта документации, а затем использовать эту команду для запуска сайта документации.

### `pnpm lint`

Команда `lint` использует ESLint для проверки всех исходных файлов.

### `pnpm test`

Команда `test` использует Vitest для запуска модульных тестов.

## Документация

Документация VuePress работает на самом VuePress и собирается из исходного кода в этом репозитории.

Все исходные файлы Markdown размещены в директории `docs`. Мы поддерживаем два перевода:

- Английский (en-US) по пути `/`
- Китайский (zh-CN) по пути `/zh/`

Мы развернули два сайта:

- Версия Release, развернутая на [Netlify](https://www.netlify.com). Этот сайт собран из последней выпущенной версии, поэтому пользователи не увидят неопубликованные изменения. Домен: [https://v2.vuepress.vuejs.org](https://v2.vuepress.vuejs.org).
- Версия Developer, развернутая на [GitHub Pages](https://pages.github.com). Этот сайт собран из последнего коммита, поэтому разработчики могут просмотреть последние изменения. Домен: [https://vuepress.github.io](https://vuepress.github.io).

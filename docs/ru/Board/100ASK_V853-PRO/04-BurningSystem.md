# Прошивка системы отладочной платы

**Примечание**: При использовании этого метода прошивки записывается файловая система ubifs, если требуется монтирование сетевой файловой системы или использование TF-карты, не рекомендуется использовать.

Подготовительная работа

1. Отладочная плата 100ASK-V853-Pro x1

2. Скачать инструмент прошивки Allwinner AllwinnertechPhoeniSuit: [AllwinnertechPhoeniSuit](https://gitlab.com/dongshanpi/tools/-/raw/main/AllwinnertechPhoeniSuit.zip)

3. Кабель TypeC X2, кабель питания 12V X1
4. Скачать минимальный образ системы EMMC: этот файл сохранен в Baidu Netdisk в папке 03_Development Board System Firmware.
5. Скачать драйвер USB для прошивки Allwinner: [драйвер USB для прошивки Allwinner](https://gitlab.com/dongshanpi/tools/-/raw/main/AllwinnerUSBFlashDeviceDriver.zip)

Как показано на рисунке ниже, подключите кабель питания 12V к разъему питания и переведите выключатель питания в направлении разъема питания. Подключите два кабеля TypeC соответственно к последовательному порту отладочной платы и порту прошивки OTG, другой конец подключите к USB-порту компьютера, после успешного подключения можно распаковать скачанный инструмент прошивки и минимальный образ системы EMMC для использования.

![image-20230627115149759](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115149759.png)

Удерживайте кнопку FEL на базовой плате и одновременно нажмите кнопку RESET на базовой плате, в это время отладочная плата войдет в режим прошивки FEL, после входа в режим прошивки можно продолжить установку специального драйвера прошивки.



Установка USB-драйвера:

После подключения отладочной платы сначала удерживайте кнопку режима прошивки **FEL**, затем нажмите один раз кнопку сброса системы **RESET**, чтобы автоматически войти в режим прошивки.

В это время мы можем увидеть, что в диспетчере устройств в разделе "Контроллеры универсальной последовательной шины" появилось неизвестное устройство, в это время нам нужно изменить скачанный ранее драйвер USB для прошивки Allwinner, затем распаковать архив драйвера USB для прошивки Allwinner, после распаковки можно увидеть такие файлы.

```
InstallUSBDrv.exe
drvinstaller_IA64.exe
drvinstaller_X86.exe
UsbDriver/
drvinstaller_X64.exe
install.bat
```

Для пользователей системы Windows 7 достаточно запустить скрипт `install.bat` от имени администратора, дождаться установки, в появившемся диалоговом окне установки драйвера нажать установить.

Для пользователей систем Windows 10/Windows 11 необходимо вручную установить драйвер в диспетчере устройств.

Как показано на рисунке ниже, при первом подключении устройства OTG в режиме прошивки в диспетчере устройств появится неизвестное устройство

![image-20230627115248344](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115248344.png)

Далее щелкните правой кнопкой мыши на этом неизвестном устройстве, в появившемся диалоговом окне нажмите "Выполнить поиск драйверов на этом компьютере".

![image-20230627115257891](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115257891.png)

Затем в появившемся новом диалоговом окне нажмите "Обзор", найдите скачанную ранее папку с драйвером USB для прошивки, найдите директорию `UsbDriver/` и войдите в нее, затем нажмите OK.

![image-20230627115307480](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115307480.png)

Обратите внимание, войдите в папку `UsbDriver/`, затем нажмите OK, как показано на рисунке ниже.

![image-20230627115316057](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115316057.png)

В это время продолжаем нажимать кнопку **Далее**, система предложит установить драйвер. В появившемся диалоговом окне нажимаем "Установить этот драйвер в любом случае" и ждем завершения установки.

![image-20230627115326333](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115326333.png)

После завершения установки появится сообщение: Windows успешно обновила ваши драйверы.

![image-20230627115334846](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115334846.png)

Наконец, мы можем увидеть, что неизвестное устройство в диспетчере устройств превратилось в устройство `USB Device(VID_1f3a_efe8)`, это означает, что драйвер устройства успешно установлен.

![image-20230627115343311](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115343311.png)

Запуск программного обеспечения для прошивки системы:

Распакуйте скачанный инструмент прошивки Allwinner AllwinnertechPhoeniSuit, также распакуйте скачанный минимальный образ системы EMMC.

После распаковки вы получите образ v853_linux_100ask_uart0.img для записи в EMMC. Другой - это папка AllwinnertechPhoeniSuit. Сначала войдите в директорию AllwinnertechPhoeniSuit\AllwinnertechPhoeniSuitRelease20201225, найдите PhoenixSuit.exe и дважды щелкните для запуска.

После открытия программы главный интерфейс программы выглядит как на рисунке ниже

![image-20230627115357579](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115357579.png)

Далее нам нужно переключиться в окно "Одноклавишная прошивка", как показано на рисунке ниже, нажмите красную рамку с номером 1, в появившемся новом окне нажмите красную рамку 2 "Обзор", найдите распакованный ранее минимальный образ системы EMMC v853_linux_100ask_uart0.img, после выбора образа нажмите красную рамку 3 "Полное стирание и обновление", наконец нажмите красную рамку 4 "Немедленное обновление".

После завершения нажатия не обращайте внимания на появившуюся информацию, в это время возьмите уже подключенную отладочную плату, удерживайте кнопку FEL, затем нажмите один раз кнопку сброса системы RESET, чтобы автоматически войти в режим прошивки и начать прошивку.

![image-20230627115414560](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115414560.png)

Во время прошивки будет отображаться индикатор прогресса прошивки, после завершения прошивки отладочная плата автоматически перезагрузится.

![image-20230627115423452](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115423452.png)

Обычно после успешной прошивки система автоматически перезагружается и загружается, в это время входим в терминал последовательного порта, можно увидеть информацию о загрузке, после загрузки всей информации нажмите клавишу Enter, чтобы войти в прошитую систему.

![image-20230627115433380](http://photos.100ask.net/allwinner-docs/v853/Basic/image-20230627115433380.png)
